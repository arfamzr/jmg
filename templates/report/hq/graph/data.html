{% extends 'layouts/base.html' %}

{% load crispy_forms_tags %}

{% block extra_styles %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.css"
  integrity="sha512-/zs32ZEJh+/EO2N1b0PEdoA10JkdC3zJ8L5FTiQu82LR9S/rOQNfQN7U59U9BC12swNeRAz3HSzIL2vpp4fv3w=="
  crossorigin="anonymous" />
{% endblock extra_styles %}

{% block body %}
<!-- Begin Page Content -->
<div class="container-fluid">

  <!-- Page Heading -->
  <h1 class="h3 m-4 text-gray-800">{{ title }}</h1>

  <div class="card shadow mb-4">
    <div class="card-body">
      <div id="production" class="row">
        <div class="col-lg-12">
          <h4>PENGELUARAN KUARI {{ month|default:'tahun'|upper }} {{ year }} (TAN METRIK)</h4>
        </div>
        <div class="col-lg-12">
          <table class="table table-bordered table-sm">
            <thead class="thead-light">
              <tr>
                <th scope="col">NEGERI</th>
                <th scope="col" style="text-align: center;">{{ rocks.rock1.name }}</th>
                <th scope="col" style="text-align: center;">JUMLAH</th>
              </tr>
            </thead>
            <tbody>
              {% for state in states %}
              <tr>
                <th>{{ state.name }}</th>
                <td style="text-align: right;">{{ state.rock1.production }}</td>
                <td style="text-align: right;">{{ state.total_by_state.production }}</td>
              </tr>
              {% endfor %}
            </tbody>
            <thead class="thead-light">
              <tr>
                <th></th>
                <th style="text-align: right;">{{ rocks.rock1.production }}</th>
                <th style="text-align: right;">{{ total.production }}</th>
              </tr>
            </thead>
          </table>
        </div>
        <div class="col-12">
          <canvas id="myChart" width="400" height="150"></canvas>
        </div>
      </div>
    </div>
  </div>

</div>
<!-- /.container-fluid -->
{% endblock body %}

{% block extra_js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.bundle.min.js"
  integrity="sha512-SuxO9djzjML6b9w9/I07IWnLnQhgyYVSpHZx0JV97kGBfTIsUYlWflyuW4ypnvhBrslz1yJ3R+S14fdCWmSmSA=="
  crossorigin="anonymous"></script>
<script>
  var ctx = document.getElementById('myChart');
  var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: [
        // {% for state in states %}
        '{{ state.name }}',
        // {% endfor %}
      ],
      datasets: [{
        label: 'PENGELUARAN {{ rocks.rock1.name }}',
        data: [
          // {% for state in states %}
          parseFloat('{{ state.rock1.production }}'),
          // {% endfor %}
        ],
        backgroundColor: [
          // {% for state in states %}
          'rgba(255, 99, 132, 0.2)',
          // {% endfor %}
        ],
        borderColor: [
          // {% for state in states %}
          'rgba(255, 99, 132, 1)',
          // {% endfor %}
        ],
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        yAxes: [{
          ticks: {
            beginAtZero: true
          }
        }]
      }
    }
  });
</script>
{% endblock extra_js %}